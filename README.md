# 🧪 식품개발 통합 플랫폼

시장분석부터 품목제조보고까지 — 식품 R&D 전 과정을 하나의 Streamlit 앱에서 수행합니다.

## 📐 8단계 프로세스 (14개 페이지)

| Phase | 기능 | 페이지 | 설명 |
|-------|------|--------|------|
| 1. 시장분석 | 📈 매출추이 | 01 | 10개 카테고리 6년치 매출 트렌드 |
| | 🏷️ 브랜드분석 | 02 | 브랜드별 점유율·YoY 비교 |
| 2. 제품기획 | 🤖 AI제품카드 | 03 | 9종 제품 → AI 배합비 자동 생성 |
| 3. 배합설계 | ⚗️ 배합설계 | 04 | 100% 기준 배합표 + 5종 표준비교 |
| | ✏️ 배합연습 | 05 | CSV 작성 → 검증 → 저장 |
| 4. 원가분석 | 💰 원가분석 | 06 | 36종 단가DB + 자동 원가계산 |
| 5. 공정설계 | 🏭 공정리스크 | 07 | 8단계 공정 + HACCP CCP |
| | 🔬 AI공정분석 | 08 | PDF 학습 → AI 리스크 분석 |
| 6. 규제검토 | 📋 규제서류 | 09 | 6단계 허가 절차 가이드 |
| 7. 표시사항 | 🏷️ 표시사항작성 | 10 | 표시기준 기반 작성 + 적합성비교 |
| | 📄 법령학습 | 11 | 3개 법령 PDF → 지식베이스 구축 |
| | 🔍 적부판정 | 12 | 3법령 기준 자동 적합/부적합 판정 |
| | 📖 법령조회 | 13 | 법령 검색 + AI 해석 |
| 8. 품목보고 | 🔍 품목제조보고 | 14 | 식품안전나라 API 실시간 조회 |

## 🚀 설치 & 실행

```bash
# 1. 의존성 설치
pip install -r requirements.txt

# 2. 실행
streamlit run app.py

# 3. 브라우저 자동 오픈
#    http://localhost:8501
```

## 📁 파일 구조

```
integrated_app/
├── app.py                  # 메인 대시보드 (진입점)
├── requirements.txt        # 의존성 목록
├── README.md
├── data/
│   ├── __init__.py         # 통합 데이터 모듈
│   ├── common.py           # R&D 공통 데이터 (매출·배합비·원가·공정)
│   └── label_engine.py     # 표시사항 적부판정 엔진 (3법령·KB·판정로직)
├── pages/                  # 14개 기능 페이지
│   ├── 01~02: 시장분석
│   ├── 03: 제품기획
│   ├── 04~05: 배합설계
│   ├── 06: 원가분석
│   ├── 07~08: 공정설계
│   ├── 09: 규제검토
│   ├── 10~13: 표시사항
│   └── 14: 품목제조보고
├── saved/                  # 배합비 저장 (자동 생성)
└── knowledge/              # 법령 KB 저장 (자동 생성)
```

## 🔑 AI 기능 사용

OpenAI API 키가 있으면 다음 기능이 활성화됩니다:
- 🤖 AI 제품카드 자동 생성
- 🔬 AI 공정 리스크 분석
- 🏷️ AI 표시사항 적합성 검토
- 📖 AI 법령 해석
- 💬 각 페이지 AI 챗봇

**설정 방법:**
1. 사이드바 하단 "OpenAI API 키" 입력란에 입력
2. 또는 `.streamlit/secrets.toml`에 `OPENAI_API_KEY = "sk-..."` 추가

## 📡 외부 API

- **식품안전나라 I1250 API**: 품목제조보고 조회 (API 키 내장)
- 일일 호출 제한: 2,000회

## 🔄 통합 전 원본 앱

이 플랫폼은 다음 3개 앱을 통합했습니다:
1. **Food R&D Platform** (food_rd_app) — 10개 페이지
2. **식품 표시사항 적부 판별** (label_checker) — 3개 페이지
3. **식품안전나라 품목제조보고 조회** (app_food_api.py) — 1개 독립 앱

---
© 2025 식품개발 통합 플랫폼 | Streamlit + OpenAI
